{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container mt-3">

    <!-- Header -->
    <div class="text-center mb-4">
        <h3 class="fw-bold">CowCare</h3>
    </div>

    <!-- การ์ดสรุป -->
    <div class="card shadow-sm mb-3 p-3">
        <h5 class="mb-3">แดชบอร์ด</h5>
        <div class="d-flex flex-wrap text-center">
            <div class="flex-fill p-2 border-end">
                <p class="mb-1 fw-bold">โคทั้งหมด</p>
                <p class="fs-4">{{ total }}</p>
            </div>
            <div class="flex-fill p-2 border-end">
                <p class="mb-1 fw-bold">โคป่วย</p>
                <p class="fs-4 text-danger">{{ sick_count|default:"0" }}</p>
            </div>
            <div class="flex-fill p-2">
                <p class="mb-1 fw-bold">โครอขาย</p>
                <p class="fs-4 text-warning">{{ for_sale_count|default:"0" }}</p>
            </div>
        </div>

        <!-- ปุ่ม -->
        <div class="text-center mt-3">
            <a href="{% url 'cattle:select_cattle_for_healthcheck' %}" 
               class="btn btn-primary btn-lg w-100">
                + บันทึกข้อมูลโค
            </a>
        </div>
    </div>

    <!-- ปฏิทิน -->
    <div class="card shadow-sm p-3">
        <h5 class="mb-3">ปฏิทินฟาร์ม</h5>
        <div id="calendar"></div>
        <div class="mt-3">
            <small class="text-muted">
                ตรวจสุขภาพ
            </small>
        </div>
    </div>

</div>

<!-- โหลด FullCalendar -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      locale: 'th',
      events: '/api/calendar-events/',
      height: 'auto'
    });
    calendar.render();
  });
</script>
{% endblock %}
